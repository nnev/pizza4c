<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style>
        @font-face {
            font-family: 'Material Icons';
            font-style: normal;
            font-weight: 400;
            src: url(/MaterialIcons-Regular.eot); /* For IE6-8 */
            src: local('Material Icons'),
            local('MaterialIcons-Regular'),
            url(/MaterialIcons-Regular.woff2) format('woff2'),
            url(/MaterialIcons-Regular.woff) format('woff'),
            url(/MaterialIcons-Regular.ttf) format('truetype');
        }

        .material-icons {
            font-family: 'Material Icons';
            font-weight: normal;
            font-style: normal;
            font-size: 24px; /* Preferred icon size */
            display: inline-block;
            line-height: 1;
            text-transform: none;
            letter-spacing: normal;
            word-wrap: normal;
            white-space: nowrap;
            direction: ltr;

            /* Support for all WebKit browsers. */
            -webkit-font-smoothing: antialiased;
            /* Support for Safari and Chrome. */
            text-rendering: optimizeLegibility;

            /* Support for Firefox. */
            -moz-osx-font-smoothing: grayscale;

            /* Support for IE. */
            font-feature-settings: 'liga';
        }


        aside {
            position: absolute;
            left: 0;
            width: 200px;
        }

        aside h1, main h2 {
            margin-bottom: 0;
        }

        ol {
            list-style: none;
        }

        aside .categoryDescription {
            font-size: small;
            color: gray;
        }

        main {
            position: absolute;
            left: 200px;
        }

        main .product > ol {
            list-style: initial;
        }

        .category, .product {
            border-top: 1px solid gray;
        }

        .category:last-child, .product:last-child {
            border-bottom: 1px solid gray;
        }

        li.product {
            min-height: 50px;
            display: flex;
        }

        .productMain {
            flex-grow: 1;
            min-height: 70px;
        }

        .productPrice {
            align-self: center;
            min-width: 5em;
            text-align: center;
        }

        .productSelect {
            align-self: center;
        }

        .productSelect a {
            padding: 20px;
            border: 1px solid blue;
            text-decoration: none;
        }

        .orderTable{
            width: 100%;
        }

        .orderTable td {
            width: 1%;
            white-space: nowrap;
        }

        .orderTable td.grow {
            width: 50%;
        }

    </style>
</head>
<body>

<aside>
    <nav>
        <ol>
            <li th:each="category : ${restaurant.menu.categories}">
                <h1>
                    <a
                            th:href="'#'+${category.id}"
                            th:text="${category.name}"
                            th:title="${#strings.arrayJoin(category.description, ',')}"
                    ></a>
                </h1>
            </li>
        </ol>
    </nav>
</aside>
<main>
    Deine Bestellung, <th:block th:text="${name}"></th:block><br>
    <th:block th:if="${!myCart.entries.isEmpty()}" th:with="selectedCart = ${myCart}">
        <th:block th:insert="toggleCartPaid"></th:block>
    </th:block>
    <a href="/changeName">I am not <th:block th:text="${name}"></th:block></a><br/>
    <th:block th:each="cartEntry : ${myCart.entries}">
        <span th:utext="${cartEntry.getOptionListHtml(restaurant.menu)}"></span>
    </th:block>
    <h2>Bezahlt:</h2>
    Summe:<th:block th:text="${allCarts.getPrice(restaurant.menu)}"></th:block>€
    <th:block th:with="selectedCarts=${allCarts.payedCarts}" th:insert="orderCartView" />
    <h2>Nicht bezahlt</h2>
    <th:block th:with="selectedCarts=${allCarts.unpayedCarts}" th:insert="orderCartView" />
    <ol>
        <li
                class="category"
                th:each="category : ${restaurant.menu.categories}">
            <h1
                    th:text="${category.name}"
                    th:id="${category.id}"
            />
            <th:block th:if="${category.description != null && category.description.size() > 0}">
            <span
                    class="categoryDescription"
                    th:text="${category.description.get(0)}"/>
            </th:block>

            <ol>
                <li
                        class="product"
                        th:each="productId : ${category.getProductIds()}"
                        th:with="product=${restaurant.menu.products.get(productId)}"
                >
                    <div class="productMain">
                        <h2 th:text="${product.name}"/>
                        <ol>
                            <li th:each="description : ${product.description}" th:text="${description}"/>
                        </ol>
                        <div th:if="${product.productInfo.anyInformation}">
                            ProductInfo:
                            <ul>
                                <li th:if="${product.productInfo.additives}">Additives: <span
                                        th:text="${product.productInfo.additives}"/></li>
                                <li th:if="${product.productInfo.allergens}">Allergens: <span
                                        th:text="${product.productInfo.allergens}"/></li>
                                <li th:if="${product.productInfo.alcoholVolume}">AlcoholVolume: <span
                                        th:text="${product.productInfo.alcoholVolume}"/></li>
                                <li th:if="${product.productInfo.caffeineAmount}">CaffeineAmount: <span
                                        th:text="${product.productInfo.caffeineAmount}"/></li>
                                <li th:if="${product.productInfo.isFoodInformationVerifiedByRestaurant}">Verified: <span
                                        th:text="${product.productInfo.isFoodInformationVerifiedByRestaurant}"/></li>
                                <li th:if="${product.productInfo.nutritionalTextManual}">Manual: <span
                                        th:text="${product.productInfo.nutritionalTextManual}"/></li>
                            </ul>
                        </div>
                    </div>
                    <div class="productSelect">
                        <th:block th:if="${restaurant.getMenu().isConfigurable(product)}">
                            <a th:href="'/customize/'+${productId}">
                                <span class="material-icons">tune</span>
                            </a>
                        </th:block>
                        <th:block th:if="!${restaurant.getMenu().isConfigurable(product)}">
                            <a th:href="'/addToCart/'+${productId}">
                                <span class="material-icons">add</span>
                            </a>
                        </th:block>
                    </div>
                    <div
                            class="productPrice"
                            th:text="${product.getVariants().get(0).prices.deliveryEuro}+'€'"
                    ></div>
                </li>
            </ol>
        </li>
    </ol>
</main>
</body>
</html>